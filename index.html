<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>nodectl by geta6</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>nodectl</h1>
        <p>supervisor script for node.js</p>

        <p class="view"><a href="https://github.com/geta6/nodectl">View the Project on GitHub <small>geta6/nodectl</small></a></p>


        <ul>
          <li><a href="https://github.com/geta6/nodectl/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/geta6/nodectl/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/geta6/nodectl">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="install" class="anchor" href="#install"><span class="octicon octicon-link"></span></a>Install:</h1>

<div class="highlight"><pre>npm install -g nodectl
</pre></div>

<h1>
<a name="how-to-use" class="anchor" href="#how-to-use"><span class="octicon octicon-link"></span></a>How to use:</h1>

<pre><code>nodectl [action] [options] &lt;program&gt;
</code></pre>

<h1>
<a name="packagejson--nodectljson" class="anchor" href="#packagejson--nodectljson"><span class="octicon octicon-link"></span></a>package.json / .nodectl.json</h1>

<ul>
<li>the key name <code>name</code> is required in <code>package.json</code>.</li>
<li>
<code>&lt;program&gt;</code> is omissible if the key name <code>main</code> exists in <code>.nodectl.json</code> or <code>package.json</code>.</li>
<li>
<code>[options]</code> defaults load from <code>.nodectl.json</code> and <code>package.json</code>.</li>
<li>
<code>[options]</code> defaults are specified by the key name of a long-option-name. </li>
</ul><h1>
<a name="synopsis---action" class="anchor" href="#synopsis---action"><span class="octicon octicon-link"></span></a>Synopsis - Action:</h1>

<h2>
<a name="show-help" class="anchor" href="#show-help"><span class="octicon octicon-link"></span></a>show help</h2>

<div class="highlight"><pre>nodectl <span class="nb">help</span>
nodectl -h
nodectl -help
nodectl --help
</pre></div>

<h2>
<a name="start-application" class="anchor" href="#start-application"><span class="octicon octicon-link"></span></a>start application</h2>

<ul>
<li>run nodejs application</li>
<li>
<code>coffee-script</code> executable</li>
</ul><div class="highlight"><pre>nodectl start app.js
nodectl app.js
nodectl app.coffee
</pre></div>

<ul>
<li>Default action is <code>start</code>
</li>
<li>Default application detect from <code>package.json</code> keyname <code>main</code>
</li>
<li>Default application detect from <code>.nodectl.json</code> keyname <code>main</code>
</li>
</ul><h2>
<a name="stop-application" class="anchor" href="#stop-application"><span class="octicon octicon-link"></span></a>stop application</h2>

<ul>
<li>send <code>SIGINT</code> to application process</li>
</ul><div class="highlight"><pre>nodectl stop app.js
</pre></div>

<h2>
<a name="restart-application" class="anchor" href="#restart-application"><span class="octicon octicon-link"></span></a>restart application</h2>

<ul>
<li>restart application master process</li>
</ul><div class="highlight"><pre>nodectl restart app.js
</pre></div>

<h2>
<a name="reload-application" class="anchor" href="#reload-application"><span class="octicon octicon-link"></span></a>reload application</h2>

<ul>
<li>restart only application child processes</li>
</ul><div class="highlight"><pre>nodectl reload app.js
</pre></div>

<h2>
<a name="check-application-status" class="anchor" href="#check-application-status"><span class="octicon octicon-link"></span></a>check application status</h2>

<ul>
<li>application running or not</li>
</ul><div class="highlight"><pre>nodectl status app.js
</pre></div>

<h2>
<a name="force-clear-pid" class="anchor" href="#force-clear-pid"><span class="octicon octicon-link"></span></a>force-clear pid</h2>

<ul>
<li>fix a problem application not running but <code>nodectl start</code> saids <code>already running</code>
</li>
</ul><div class="highlight"><pre>nodectl force-clear app.js
</pre></div>

<h1>
<a name="synopsis---option" class="anchor" href="#synopsis---option"><span class="octicon octicon-link"></span></a>Synopsis - Option:</h1>

<h2>
<a name="-p---port" class="anchor" href="#-p---port"><span class="octicon octicon-link"></span></a><code>-p</code>, <code>--port</code>
</h2>

<ul>
<li>set listening port with <code>process.env.PORT</code>
</li>
<li>default <code>3000</code>
</li>
</ul><div class="highlight"><pre>nodectl start app.js -p 3000
</pre></div>

<h2>
<a name="-e---env" class="anchor" href="#-e---env"><span class="octicon octicon-link"></span></a><code>-e</code>, <code>--env</code>
</h2>

<ul>
<li>set application environment with <code>process.env.NODE_ENV</code>
</li>
<li>default <code>development</code>
</li>
</ul><div class="highlight"><pre>nodectl start app.js -e production
</pre></div>

<h2>
<a name="-c---cluster" class="anchor" href="#-c---cluster"><span class="octicon octicon-link"></span></a><code>-c</code>, <code>--cluster</code>
</h2>

<ul>
<li>concurrent application child process</li>
<li>nodectl uses <code>cluster</code> native module forking with</li>
<li>default cpu thread length</li>
</ul><div class="highlight"><pre>nodectl start app.js -c 1
</pre></div>

<h2>
<a name="-d---daemon" class="anchor" href="#-d---daemon"><span class="octicon octicon-link"></span></a><code>-d</code>, <code>--daemon</code>
</h2>

<ul>
<li>daemonize application</li>
<li>default <code>false</code>
</li>
</ul><div class="highlight"><pre>nodectl start app.js -d
</pre></div>

<h2>
<a name="-w---watch" class="anchor" href="#-w---watch"><span class="octicon octicon-link"></span></a><code>-w</code>, <code>--watch</code>
</h2>

<ul>
<li>watch code changes, auto reload programs</li>
<li>default <code>false</code>
</li>
</ul><div class="highlight"><pre>nodectl start app.js -w
</pre></div>

<h2>
<a name="-d---delay" class="anchor" href="#-d---delay"><span class="octicon octicon-link"></span></a><code>-D</code>, <code>--delay</code>
</h2>

<ul>
<li>on reload, set interval time(ms) for children re-fork</li>
<li>default <code>250</code>
</li>
</ul><div class="highlight"><pre>nodectl restart app.js -D 1000
</pre></div>

<h2>
<a name="-n---nocolor" class="anchor" href="#-n---nocolor"><span class="octicon octicon-link"></span></a><code>-n</code>, <code>--nocolor</code>
</h2>

<ul>
<li>stop colorize console</li>
<li>nodectl defaults colorize <code>console.{log,info,warn,error}</code>
</li>
<li>default <code>false</code>
</li>
</ul><div class="highlight"><pre>nodectl start app.js -n
</pre></div>

<h2>
<a name="-p---pidpath" class="anchor" href="#-p---pidpath"><span class="octicon octicon-link"></span></a><code>-P</code>, <code>--pidpath</code>
</h2>

<ul>
<li>specified the directory pid file will be placed</li>
<li>default <code>\</code>which nodectl`/../tmp/${APPNAME}.pid`</li>
</ul><div class="highlight"><pre>nodectl start app.js -P tmp
</pre></div>

<h2>
<a name="-l---logpath" class="anchor" href="#-l---logpath"><span class="octicon octicon-link"></span></a><code>-l</code>, <code>--logpath</code>
</h2>

<ul>
<li>specified the directory log files will be placed</li>
<li>default <code>null</code> (no log)</li>
</ul><div class="highlight"><pre>nodectl start app.js -l tmp
</pre></div>

<h2>
<a name="-x---execmaster" class="anchor" href="#-x---execmaster"><span class="octicon octicon-link"></span></a><code>-x</code>, <code>--execmaster</code>
</h2>

<ul>
<li>execute script with master process context</li>
<li>script will be spawn in order to prevent a master process down</li>
<li>specifiable <code>coffee-script</code>
</li>
<li>default <code>null</code>
</li>
</ul><div class="highlight"><pre>nodectl start app.js -x script/cron.js
</pre></div>

<h2>
<a name="-a---assets" class="anchor" href="#-a---assets"><span class="octicon octicon-link"></span></a><code>-a</code>, <code>--assets</code>
</h2>

<ul>
<li>see the following section</li>
</ul><h2>
<a name="-o---output" class="anchor" href="#-o---output"><span class="octicon octicon-link"></span></a><code>-o</code>, <code>--output</code>
</h2>

<ul>
<li>watch assets changes, auto compile</li>
<li>assets directory specified with <code>-a</code>
</li>
<li>output directory specified with <code>-o</code>
</li>
<li>
<code>-a</code> and <code>-o</code>, both are required to perform correctly</li>
<li>css, <a href="http://learnboost.github.io/stylus/">styl</a>, js, <a href="http://coffeescript.org">coffee</a>, html, <a href="http://jade-lang.com">jade</a> enable</li>
<li>keeping directory structure and file name</li>
<li>default <code>null</code>
</li>
</ul><div class="highlight"><pre>nodectl start app.js -a assets -o public
</pre></div>

<h4>
<a name="compile-from" class="anchor" href="#compile-from"><span class="octicon octicon-link"></span></a>compile from:</h4>

<pre><code>assets
 `- css
     `- style.styl
 `- js
     `- script.coffee
</code></pre>

<h4>
<a name="compile-to" class="anchor" href="#compile-to"><span class="octicon octicon-link"></span></a>compile to:</h4>

<pre><code>public
 `- css
     `- style.css
 `- js
     `- script.js
</code></pre>

<h2>
<a name="-m---minify" class="anchor" href="#-m---minify"><span class="octicon octicon-link"></span></a><code>-m</code>, <code>--minify</code>
</h2>

<ul>
<li>minify compiled assets</li>
</ul><div class="highlight"><pre>nodectl start app.js -a assets -o public -m
</pre></div>

<h2>
<a name="-v---verbose" class="anchor" href="#-v---verbose"><span class="octicon octicon-link"></span></a><code>-V</code>, <code>--verbose</code>
</h2>

<ul>
<li>show verbose information</li>
</ul><div class="highlight"><pre>nodectl start app.js -V
</pre></div>

<h2>
<a name="-v---version" class="anchor" href="#-v---version"><span class="octicon octicon-link"></span></a><code>-v</code>, <code>--version</code>
</h2>

<ul>
<li>show <code>nodectl</code> version info</li>
</ul><h1>
<a name="recipes" class="anchor" href="#recipes"><span class="octicon octicon-link"></span></a>Recipes:</h1>

<ul>
<li>nodectl behavior can be changed by editing a <code>.nodectl.json</code> file.</li>
<li>
<code>.nodectl.json</code> should be placed in PROJECT_ROOT</li>
</ul><h2>
<a name="project-on-development" class="anchor" href="#project-on-development"><span class="octicon octicon-link"></span></a>project on development</h2>

<div class="highlight"><pre><span class="p">{</span>
  <span class="nt">"main"</span><span class="p">:</span> <span class="s2">"app.coffee"</span><span class="p">,</span>
  <span class="nt">"env"</span><span class="p">:</span> <span class="s2">"development"</span><span class="p">,</span>
  <span class="nt">"cluster"</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">,</span>
  <span class="nt">"watch"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">"assete"</span><span class="p">:</span> <span class="s2">"assets"</span><span class="p">,</span>
  <span class="nt">"output"</span><span class="p">:</span> <span class="s2">"public"</span><span class="p">,</span>
  <span class="nt">"minify"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">"daemon"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nt">"pidpath"</span><span class="p">:</span> <span class="s2">"tmp"</span><span class="p">,</span>
  <span class="nt">"logpath"</span><span class="p">:</span> <span class="s2">"tmp"</span><span class="p">,</span>
  <span class="nt">"verbose"</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>

<h2>
<a name="project-on-production" class="anchor" href="#project-on-production"><span class="octicon octicon-link"></span></a>project on production</h2>

<div class="highlight"><pre><span class="p">{</span>
  <span class="nt">"main"</span><span class="p">:</span> <span class="s2">"app.coffee"</span><span class="p">,</span>
  <span class="nt">"env"</span><span class="p">:</span> <span class="s2">"production"</span><span class="p">,</span>
  <span class="nt">"assete"</span><span class="p">:</span> <span class="s2">"assets"</span><span class="p">,</span>
  <span class="nt">"output"</span><span class="p">:</span> <span class="s2">"public"</span><span class="p">,</span>
  <span class="nt">"minify"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">"daemon"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">"pidpath"</span><span class="p">:</span> <span class="s2">"tmp"</span><span class="p">,</span>
  <span class="nt">"logpath"</span><span class="p">:</span> <span class="s2">"tmp"</span>
<span class="p">}</span>
</pre></div>

<h2>
<a name="crontab-action" class="anchor" href="#crontab-action"><span class="octicon octicon-link"></span></a>crontab action</h2>

<ul>
<li>use <code>--execmaster</code>
</li>
</ul><h4>
<a name="scriptcoffee" class="anchor" href="#scriptcoffee"><span class="octicon octicon-link"></span></a>script.coffee</h4>

<div class="highlight"><pre><span class="nx">setInterval</span> <span class="nf">-&gt;</span>
  <span class="o">/*</span> <span class="nx">some</span> <span class="nx">action</span> <span class="o">*/</span>
<span class="p">,</span> <span class="mi">5000</span>
</pre></div>

<h4>
<a name="nodectjson" class="anchor" href="#nodectjson"><span class="octicon octicon-link"></span></a>.nodect.json</h4>

<div class="highlight"><pre><span class="p">{</span>
  <span class="nt">"main"</span><span class="p">:</span> <span class="s2">"app.coffee"</span><span class="p">,</span>
  <span class="nt">"env"</span><span class="p">:</span> <span class="s2">"production"</span><span class="p">,</span>
  <span class="nt">"assete"</span><span class="p">:</span> <span class="s2">"assets"</span><span class="p">,</span>
  <span class="nt">"output"</span><span class="p">:</span> <span class="s2">"public"</span><span class="p">,</span>
  <span class="nt">"minify"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">"daemon"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">"pidpath"</span><span class="p">:</span> <span class="s2">"tmp"</span><span class="p">,</span>
  <span class="nt">"logpath"</span><span class="p">:</span> <span class="s2">"tmp"</span><span class="p">,</span>
  <span class="nt">"execmaster"</span><span class="p">:</span> <span class="s2">"script.coffee"</span>
<span class="p">}</span>
</pre></div>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/geta6">geta6</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>