{"name":"nodectl","tagline":"supervisor script for node.js","body":"\r\n# Install:\r\n\r\n```sh\r\nnpm install -g nodectl\r\n```\r\n\r\n# How to use:\r\n\r\n```\r\nnodectl [action] [options] <program>\r\n```\r\n\r\n# package.json / .nodectl.json\r\n\r\n* the key name `name` is required in `package.json`.\r\n* `<program>` is omissible if the key name `main` exists in `.nodectl.json` or `package.json`.\r\n* `[options]` defaults load from `.nodectl.json` and `package.json`.\r\n* `[options]` defaults are specified by the key name of a long-option-name. \r\n\r\n# Synopsis - Action:\r\n\r\n## show help\r\n\r\n```sh\r\nnodectl help\r\nnodectl -h\r\nnodectl -help\r\nnodectl --help\r\n```\r\n\r\n## start application\r\n\r\n* run nodejs application\r\n* specifiable `coffee-script`\r\n\r\n```sh\r\nnodectl start app.js\r\nnodectl app.js\r\nnodectl app.coffee\r\n```\r\n\r\n* Default action is `start`\r\n* Default application detect from `package.json` keyname `main`\r\n* Default application detect from `.nodectl.json` keyname `main`\r\n\r\n## stop application\r\n\r\n* send `SIGINT` to application process\r\n\r\n```sh\r\nnodectl stop app.js\r\n```\r\n\r\n## restart application\r\n\r\n* restart application master process\r\n\r\n```sh\r\nnodectl restart app.js\r\n```\r\n\r\n## reload application\r\n\r\n* restart only application child processes\r\n\r\n```sh\r\nnodectl reload app.js\r\n```\r\n\r\n## check application status\r\n\r\n* application running or not\r\n\r\n```sh\r\nnodectl status app.js\r\n```\r\n\r\n## force-clear pid\r\n\r\n* fix a problem application not running but `nodectl start` saids `already running`\r\n\r\n```sh\r\nnodectl force-clear app.js\r\n```\r\n\r\n# Synopsis - Option:\r\n\r\n## `-p`, `--port`\r\n\r\n* set listening port with `process.env.PORT`\r\n* default `3000`\r\n\r\n```sh\r\nnodectl start app.js -p 3000\r\n```\r\n\r\n## `-e`, `--env`\r\n\r\n* set application environment with `process.env.NODE_ENV`\r\n* default `development`\r\n\r\n```sh\r\nnodectl start app.js -e production\r\n```\r\n\r\n## `-c`, `--cluster`\r\n\r\n* concurrent application child process\r\n* nodectl uses `cluster` native module forking with\r\n* default cpu thread length\r\n\r\n```sh\r\nnodectl start app.js -c 1\r\n```\r\n\r\n## `-d`, `--daemon`\r\n\r\n* daemonize application\r\n* default `false`\r\n\r\n```sh\r\nnodectl start app.js -d\r\n```\r\n\r\n## `-w`, `--watch`\r\n\r\n* watch code changes, auto reload programs\r\n* default `false`\r\n\r\n```sh\r\nnodectl start app.js -w\r\n```\r\n\r\n## `-D`, `--delay`\r\n\r\n* on reload, set interval time(ms) for children re-fork\r\n* default `250`\r\n\r\n```sh\r\nnodectl restart app.js -D 1000\r\n```\r\n\r\n## `-n`, `--nocolor`\r\n\r\n* stop colorize console\r\n* nodectl defaults colorize `console.{log,info,warn,error}`\r\n* default `false`\r\n\r\n```sh\r\nnodectl start app.js -n\r\n```\r\n\r\n## `-P`, `--pidpath`\r\n\r\n* specified the directory pid file will be placed\r\n* default `\\`which nodectl\\`/../tmp/${APPNAME}.pid`\r\n\r\n```sh\r\nnodectl start app.js -P tmp\r\n```\r\n\r\n## `-l`, `--logpath`\r\n\r\n* specified the directory log files will be placed\r\n* default `null` (no log)\r\n\r\n```sh\r\nnodectl start app.js -l tmp\r\n```\r\n\r\n## `-x`, `--execmaster`\r\n\r\n* execute script with master process context\r\n* script will be spawn in order to prevent a master process down\r\n* specifiable `coffee-script`\r\n* default `null`\r\n\r\n```sh\r\nnodectl start app.js -x script/cron.js\r\n```\r\n\r\n## `-a`, `--assets`\r\n\r\n* see the following section\r\n\r\n## `-o`, `--output`\r\n\r\n* watch assets changes, auto compile\r\n* assets directory specified with `-a`\r\n* output directory specified with `-o`\r\n* `-a` and `-o`, both are required to perform correctly\r\n* css, [styl](http://learnboost.github.io/stylus/), js, [coffee](http://coffeescript.org), html, [jade](http://jade-lang.com) enable\r\n* keeping directory structure and file name\r\n* default `null`\r\n\r\n```sh\r\nnodectl start app.js -a assets -o public\r\n```\r\n\r\n#### compile from:\r\n\r\n```\r\nassets\r\n `- css\r\n     `- style.styl\r\n `- js\r\n     `- script.coffee\r\n```\r\n\r\n#### compile to:\r\n\r\n```\r\npublic\r\n `- css\r\n     `- style.css\r\n `- js\r\n     `- script.js\r\n```\r\n\r\n## `-m`, `--minify`\r\n\r\n* minify compiled assets\r\n\r\n```sh\r\nnodectl start app.js -a assets -o public -m\r\n```\r\n\r\n## `-V`, `--verbose`\r\n\r\n* show verbose information\r\n\r\n```sh\r\nnodectl start app.js -V\r\n```\r\n\r\n## `-v`, `--version`\r\n\r\n* show `nodectl` version info\r\n\r\n\r\n# Recipes:\r\n\r\n* nodectl behavior can be changed by editing a `.nodectl.json` file.\r\n* `.nodectl.json` should be placed in PROJECT_ROOT\r\n\r\n## project on development\r\n\r\n```json\r\n{\r\n  \"main\": \"app.coffee\",\r\n  \"env\": \"development\",\r\n  \"cluster\": \"1\",\r\n  \"watch\": true,\r\n  \"assete\": \"assets\",\r\n  \"output\": \"public\",\r\n  \"minify\": true,\r\n  \"daemon\": false,\r\n  \"pidpath\": \"tmp\",\r\n  \"logpath\": \"tmp\",\r\n  \"verbose\": true\r\n}\r\n```\r\n\r\n## project on production\r\n\r\n```json\r\n{\r\n  \"main\": \"app.coffee\",\r\n  \"env\": \"production\",\r\n  \"assete\": \"assets\",\r\n  \"output\": \"public\",\r\n  \"minify\": true,\r\n  \"daemon\": true,\r\n  \"pidpath\": \"tmp\",\r\n  \"logpath\": \"tmp\"\r\n}\r\n```\r\n\r\n## crontab action\r\n\r\n* use `--execmaster`\r\n\r\n#### script.coffee\r\n\r\n```coffee\r\nsetInterval ->\r\n  /* some action */\r\n, 5000\r\n```\r\n\r\n#### .nodect.json\r\n\r\n```json\r\n{\r\n  \"main\": \"app.coffee\",\r\n  \"env\": \"production\",\r\n  \"assete\": \"assets\",\r\n  \"output\": \"public\",\r\n  \"minify\": true,\r\n  \"daemon\": true,\r\n  \"pidpath\": \"tmp\",\r\n  \"logpath\": \"tmp\",\r\n  \"execmaster\": \"script.coffee\"\r\n}\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}