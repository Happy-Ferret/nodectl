{"name":"nodectl","tagline":"A simple CLI tool for ensuring that a given node.js application runs conveniently and continuously.","body":"# nodectl\r\n\r\nA simple CLI tool for ensuring that a given node.js application runs conveniently and continuously.\r\n\r\n## Features\r\n\r\n* start-stop interface\r\n* set envs\r\n* clustering\r\n* daemonize\r\n* job script\r\n* stdout and stderr logger\r\n* watch script changes\r\n* watch assets changes\r\n* compile and minify assets\r\n\r\n## Installation\r\n\r\n```\r\nnpm i nodectl -g\r\n```\r\n\r\n## Usage\r\n\r\nYou can use nodectl to run javascript or coffee-script.\r\n\r\n```\r\nnodectl [action] [options] <script>\r\n```\r\nThe option of a lower case requires a parameter, an upper case is Boolean.\r\n\r\n```\r\nUsage: nodectl [action] [options] <script>\r\n\r\nAction:\r\n    start   : start <script> as a node.js app\r\n    stop    : stop the <script>\r\n    restart : restart the <script>\r\n    status  : check the <script> running or not\r\n\r\nOptions:\r\n    -p, --port    : set process.env.PORT        3000\r\n    -e, --env     : set process.env.NODE_ENV    development\r\n    -c, --cluster : number of concurrents       CPU_THREAD_LENGTH\r\n    -d, --delay   : delay time for refork       250\r\n    -s, --setenv  : set custom env (k=v)        {}\r\n    -x, --exec    : exec job script             null\r\n    -l, --log     : stdout+stderr log file      null\r\n    -1, --stdout  : stdout log file             null\r\n    -2, --stderr  : stderr log file             null\r\n    -a, --assets  : dir for assets              null\r\n    -o, --output  : dir for assets output       null\r\n    -M, --minify  : minify compiled assets      false\r\n    -D, --daemon  : daemonize process           false\r\n    -W, --watch   : restart app on code change  false\r\n    -N, --nocolor : disable custom console      false\r\n    -v, --version : show version and exit\r\n    -h, --help    : show this message and exit\r\n    --debug       : show debug information\r\n```\r\n\r\n## Requirement\r\n\r\nnodectl requires `package.json` includes the key named __name__ and __version__.\r\n\r\n`<script>` is omissible if the key named __main__ exists in either `package.json` or `.nodectl.json`.\r\n\r\n### .nodectl.json\r\n\r\nWhen `.nodectl.json` is placed in `PROJECT_ROOT`, load the value for key named __long-option-name__ and set to a `[options]` default value.\r\n\r\nSee [Recipes](#Recipes) section for how to write json file.\r\n\r\n### .nodectl.run\r\n\r\nDo not touch `${PROJECT_ROOT}/.nodectl.run` manually.\r\n\r\n`${PROJECT_ROOT}/.nodectl.run` use for app state management.\r\n\r\n## Synopsis - actions\r\n\r\ncurrent working directory should be under the project root.\r\n\r\n### show help and exit\r\n\r\n```\r\nnodectl -h\r\nnodectl --help\r\n```\r\n\r\n### show version and exit\r\n\r\n```\r\nnodectl -v\r\nnodectl --version\r\n```\r\n\r\n### start application\r\n\r\ndefault action, only `javascript` or `coffee-script` runnable.\r\n\r\n```\r\nnodectl start app.js\r\nnodectl app.js\r\nnodectl app.coffee\r\n```\r\n\r\n### stop application\r\n\r\n```\r\nnodectl stop\r\n```\r\n\r\n### restart application\r\n\r\nrestart application workers\r\n\r\n```\r\nnodectl restart app.js\r\n```\r\n\r\n### check application status\r\n\r\n```\r\nnodectl status app.js\r\n```\r\n\r\n## Synopsis - options\r\n\r\n### -p, --port\r\n\r\nset listening port with `process.env.PORT`\r\n\r\n```\r\nnodectl app.js -p 3000\r\n```\r\n\r\n### -e, --env\r\n\r\nset application environment with `process.env.NODE_ENV`\r\n\r\n```\r\nnodectl app.js -e production\r\n```\r\n\r\n### -c, --cluster\r\n\r\nnumber of process concurrents\r\n\r\n```\r\nnodectl app.js -c 1\r\n```\r\n\r\n### -d, --delay\r\n\r\ninterval time on forking worker\r\n\r\n```\r\nnodectl app.js -d 250\r\n```\r\n\r\n### -s, --setenv\r\n\r\nset custom envs\r\n\r\n```\r\nnodectl app.js -s ROOTDIR=/opt -s COEFFICIENT=3.6\r\n```\r\n\r\n### -x, --exec\r\n\r\nexecute job script on launch\r\n\r\n```\r\nnodectl app.js -x clock.js\r\n```\r\n\r\n### -l, --log\r\n\r\nlogs stdout and stderr to file\r\n\r\n```\r\nnodectl app.js -l app.log\r\n```\r\n\r\n### -1, --stdout\r\n\r\noverwrite stdout log file\r\n\r\n```\r\nnodectl app.js -1 app.out\r\n```\r\n\r\n`app.log` logs stderr only:\r\n```\r\nnodectl app.js -l app.log -1 app.out\r\n```\r\n\r\n### -2, --stderr\r\n\r\noverwrite stderr log file\r\n\r\n```\r\nnodectl app.js -2 app.err\r\n```\r\n\r\n### -a, --assets\r\n\r\nset asset directory __Note:__ required -o option\r\n\r\ncompiles automatically on change assets\r\n\r\ncompilable: js, css, html, coffee, stylus, jade\r\n\r\n```\r\nnodectl app.js -a assets -o public\r\n```\r\n\r\n### -o, --output\r\n\r\nset output directory __Note:__ required -a option\r\n\r\ncompiles automatically on change assets\r\n\r\n```\r\nnodectl app.js -a assets -o public\r\n```\r\n\r\n### -M, --minify\r\n\r\nminify code on compiles assets\r\n\r\n```\r\nnodectl app.js -M -a assets -o public\r\n```\r\n\r\n### -D, --daemon\r\n\r\ndaemonize app\r\n\r\n```\r\nnodectl app.js -D\r\n```\r\n\r\n### -W, --watch\r\n\r\nwatch code changes, auto reload scripts\r\n\r\n```\r\nnodectl app.js -W\r\n```\r\n\r\n### -N, --nocolor\r\n\r\nstop colorize console\r\n\r\n```\r\nnodectl app.js -N\r\n```\r\n\r\n### --debug\r\n\r\nshow debug info\r\n\r\n```\r\nnodectl app.js --debug\r\n```\r\n\r\n<a name='Recipes'></a>\r\n## Recipes\r\n\r\n### Project on Development\r\n\r\n#### .nodectl.json\r\n```\r\n{\r\n  \"main\": \"app.coffee\",\r\n  \"env\": \"development\",\r\n  \"cluster\": 1,\r\n  \"watch\": true,\r\n  \"assets\": \"assets\",\r\n  \"output\": \"public\",\r\n  \"minify\": true\r\n}\r\n```\r\n#### equals to\r\n```\r\nnodectl start app.coffee -e development -c 1 -W -a assets -o public -M\r\n```\r\n\r\n#### start app\r\n\r\n```\r\ncd $PROJECT_ROOT\r\nnodectl\r\n```\r\n\r\n\r\n### Project on Production\r\n\r\n#### .nodectl.json\r\n```\r\n{\r\n  \"main\": \"app.coffee\",\r\n  \"env\": \"production\",\r\n  \"assets\": \"assets\",\r\n  \"output\": \"public\",\r\n  \"minify\": true,\r\n  \"daemon\": true\r\n}\r\n```\r\n#### equals to\r\n```\r\nnodectl start app.coffee -e production -a assets -o output -M -D\r\n```\r\n\r\n### Set Environment\r\n\r\n#### .nodectl.json\r\n```\r\n{\r\n  \"main\": \"app.coffee\",\r\n  \"assets\": \"assets\",\r\n  \"output\": \"public\",\r\n  \"minify\": true,\r\n  \"setenv\": {\r\n    \"ROOTDIR\": \"/opt\",\r\n    \"COEFFICIENT\": 3.6\r\n  }\r\n}\r\n```\r\n\r\n#### equals to\r\n```\r\nnodectl start app.coffee -a assets -o output -M -s ROOTDIR=/opt -s COEFFICIENT=3.6\r\n```\r\n\r\n## crontab action\r\n\r\n* use `--exec`\r\n\r\n#### script.coffee\r\n\r\n```\r\nsetInterval ->\r\n  /* some action */\r\n, 5000\r\n```\r\n\r\n#### .nodectl.json\r\n\r\n```\r\n{\r\n  \"main\": \"app.coffee\",\r\n  \"env\": \"production\",\r\n  \"assete\": \"assets\",\r\n  \"output\": \"public\",\r\n  \"minify\": true,\r\n  \"daemon\": true,\r\n  \"exec\": \"script.coffee\"\r\n}\r\n```\r\n\r\n## MIT LICENSE\r\nCopyright &copy; 2013 geta6 licensed under [MIT](http://opensource.org/licenses/MIT)\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}